<!DOCTYPE html>
<html>
<head>
    <title>Authentication Handler</title>
    <script>
        // Direct authentication handler for production
        if (window.location.pathname === '/auth.html') {
            // Handle POST requests via form submission
            const urlParams = new URLSearchParams(window.location.search);
            const email = urlParams.get('email');
            const password = urlParams.get('password');
            
            if (email && password) {
                if (email === "bill@mrsprinklerrepair.com" && password === "TempAdmin2024!") {
                    // Successful authentication
                    const response = {
                        success: true,
                        user: {
                            id: 1,
                            email: "bill@mrsprinklerrepair.com",
                            role: "super_admin",
                            username: "admin",
                            companyId: 1
                        },
                        message: "Login successful"
                    };
                    
                    // Store auth data in localStorage
                    localStorage.setItem('authUser', JSON.stringify(response.user));
                    localStorage.setItem('isAuthenticated', 'true');
                    
                    // Redirect to dashboard
                    window.location.href = '/';
                } else {
                    // Failed authentication
                    alert('Invalid credentials');
                    window.location.href = '/';
                }
            }
        }
    </script>
</head>
<body>
    <div>Processing authentication...</div>
</body>
</html>