<!DOCTYPE html>
<html>
<head>
    <title>Logout Test</title>
</head>
<body>
    <h1>Logout Test Page</h1>
    <button onclick="testLogout()">Test Logout</button>
    
    <script>
        async function testLogout() {
            console.log("Testing logout...");
            
            // Clear storage
            localStorage.clear();
            sessionStorage.clear();
            
            // Clear cookies
            document.cookie.split(";").forEach(cookie => {
                const name = cookie.split("=")[0].trim();
                if (name) {
                    document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                }
            });
            
            // Server logout
            try {
                const response = await fetch("/api/auth/logout", {
                    method: "POST",
                    credentials: "include",
                    headers: { "Content-Type": "application/json" }
                });
                console.log("Server logout response:", response.status);
            } catch (error) {
                console.log("Server logout error:", error);
            }
            
            // Force navigation
            console.log("Attempting navigation...");
            window.location.href = "/login";
        }
    </script>
</body>
</html>