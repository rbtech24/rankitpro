# Render.com Deployment Guide for Rank It Pro

## Quick Deploy (Recommended)

1. **Connect Repository**
   - Sign in to [Render.com](https://render.com)
   - Click "New +" → "Blueprint"
   - Connect your GitHub repository
   - Select the `render.yaml` file

2. **Set Environment Variables**
   Required API keys (add in Render dashboard):
   ```
   SENDGRID_API_KEY=your_sendgrid_key
   OPENAI_API_KEY=your_openai_key
   ANTHROPIC_API_KEY=your_anthropic_key (optional)
   XAI_API_KEY=your_xai_key (optional)
   STRIPE_SECRET_KEY=your_stripe_secret
   STRIPE_PUBLISHABLE_KEY=your_stripe_publishable
   STRIPE_STARTER_PRICE_ID=price_xxx
   STRIPE_PRO_PRICE_ID=price_xxx
   STRIPE_AGENCY_PRICE_ID=price_xxx
   TWILIO_ACCOUNT_SID=your_twilio_sid (optional)
   TWILIO_AUTH_TOKEN=your_twilio_token (optional)
   TWILIO_PHONE_NUMBER=your_twilio_phone (optional)
   ```

3. **Deploy**
   - Click "Apply" to create services
   - Wait for build and deployment (5-10 minutes)
   - Database will be created automatically

## Manual Deployment

### 1. Create PostgreSQL Database
- Go to Render Dashboard
- Click "New +" → "PostgreSQL"
- Database Name: `rankitpro`
- Plan: Free (or paid for production)
- Save connection details

### 2. Create Web Service
- Click "New +" → "Web Service"
- Connect repository
- Configuration:
  ```
  Name: rankitpro-web
  Environment: Node
  Build Command: npm ci && npm run build
  Start Command: npm start
  Plan: Starter ($7/month minimum for custom domains)
  ```

### 3. Environment Variables
Add these in the web service settings:
```bash
NODE_ENV=production
DATABASE_URL=[Auto-filled from database]
SESSION_SECRET=[Auto-generated by Render]
SUPER_ADMIN_EMAIL=admin@yourcompany.com
SUPER_ADMIN_PASSWORD=[Auto-generated by Render]

# API Keys (you must provide these)
SENDGRID_API_KEY=
OPENAI_API_KEY=
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_STARTER_PRICE_ID=
STRIPE_PRO_PRICE_ID=
STRIPE_AGENCY_PRICE_ID=

# Optional integrations
ANTHROPIC_API_KEY=
XAI_API_KEY=
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
```

### 4. Custom Domain (Optional)
- In web service settings → "Custom Domains"
- Add your domain: `app.yourcompany.com`
- Configure DNS records as shown

## Health Checks

Render automatically monitors:
- Health endpoint: `https://your-app.onrender.com/api/health`
- Database connectivity: `https://your-app.onrender.com/api/health/database`

## SSL/TLS

- Automatic HTTPS with Let's Encrypt certificates
- Force HTTPS redirects enabled by default
- Custom domain SSL included with paid plans

## Database Management

**Initial Setup:**
```bash
# After deployment, run database migrations
curl -X POST https://your-app.onrender.com/api/db/migrate
```

**Backup:**
- Render provides automatic daily backups on paid plans
- Manual backups available in dashboard

## Monitoring

**Application Logs:**
- Available in Render dashboard
- Real-time log streaming
- Log retention based on plan

**Performance:**
- Built-in metrics dashboard
- Response time monitoring
- Error rate tracking

## Scaling

**Vertical Scaling:**
- Upgrade plan in dashboard
- Zero downtime upgrades

**Horizontal Scaling:**
- Available on Team plan and above
- Auto-scaling based on CPU/memory

## Production Optimizations

**Security:**
- Environment variables encrypted at rest
- HTTPS enforced
- CORS properly configured
- Rate limiting enabled

**Performance:**
- Static asset caching
- Gzip compression
- Keep-alive connections

## Troubleshooting

**Build Failures:**
1. Check build logs in dashboard
2. Verify Node.js version compatibility
3. Ensure all dependencies in package.json

**Runtime Errors:**
1. Check application logs
2. Verify environment variables
3. Test database connectivity

**API Key Issues:**
1. Verify keys are set correctly
2. Check key permissions and quotas
3. Test endpoints individually

## Support

- Render documentation: https://render.com/docs
- Community forum: https://community.render.com
- Status page: https://status.render.com

## Cost Estimation

**Minimum Production Setup:**
- Web Service (Starter): $7/month
- PostgreSQL (Free): $0/month
- Total: $7/month

**Recommended Production:**
- Web Service (Standard): $25/month
- PostgreSQL (Starter): $7/month
- Total: $32/month

## Post-Deployment Checklist

- [ ] Application accessible at deployment URL
- [ ] Database connection working
- [ ] Admin account creation successful
- [ ] Email notifications functioning
- [ ] Stripe payments processing
- [ ] All API endpoints responding
- [ ] PWA features working offline
- [ ] Custom domain configured (if applicable)
- [ ] SSL certificate active
- [ ] Monitoring alerts configured